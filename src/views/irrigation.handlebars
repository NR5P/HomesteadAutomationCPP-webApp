<form class="deviceForm" action="/irrigation" method="POST"> 
    <label for="name">Name: </label>           
    <input type="text" id="name" name="name" value="">

    <label for="pin">Pin: </label>           
    <input type="number" id="pin" name="pin" value="">

    <label for="notes">Notes: </label>           
    <input type="textarea" id="notes" name="notes" value="">

    <div class="times-div">
        <div class="hr-min-sec-time">
            <label for="cycleOnTimeHr" class="cycleOnTime">Cycle On Time Hr:Min:Sec </label>
            <input type="number" class"cycleOnTimeHr" name="cycleOnTimeHr" step="1" value="">
            <span class="colon">:</span>   
            <input type="number" class"cycleOnTimeMin" name="cycleOnTimeMin" step="1" value="">
            <span class="colon">:</span>   
            <input type="number" class"cycleOnTimeSec" name="cycleOnTimeSec" step="1" value="">
        </div>

        <div class="on-times">
            <label for="onTime">On Time(s)</label>
            <div>
                <input type="time" name="onTime"><span></span>
            </div>
        </div>
        <button type="button" class="delete-btn">Delete</button>
    </div>
    <button type="button" id="addAnothertime">Add Another Time</button>

    <button type="submit" class="form-submit">Add</button>
    <button type="button" class="form-cancel" onclick = "window.location.href = '/';">Cancel</button>
</form>

<script>
    document.getElementById("addAnothertime").addEventListener("click", (e) => {
        const addAnotherBtn = document.getElementById("addAnothertime");

        const elementToAddStartTime = `<label for="cycleOnTimeHr" class="cycleOnTime">Cycle On Time Hr:Min:Sec </label>
                                        <input type="number" class"cycleOnTimeHr" name="cycleOnTimeHr" step="1" value="">
                                        <span class="colon">:</span>   
                                        <input type="number" class"cycleOnTimeMin" name="cycleOnTimeMin" step="1" value="">
                                        <span class="colon">:</span>   
                                        <input type="number" class"cycleOnTimeSec" name="cycleOnTimeSec" step="1" value="">`;
        const divToAddForStartTime = document.createElement("div");
        divToAddForStartTime.className = "hr-min-sec-time";
        divToAddForStartTime.innerHTML = elementToAddStartTime;

        const elementToAddOnTime = `<label for="onTime">On Time(s)</label>
                                    <div><input type="time" name="onTime"><span></span></div>`;
        const divToAdd = document.createElement("div");
        divToAdd.className = "on-times";
        divToAdd.innerHTML = elementToAddOnTime;

        const deleteBtn = document.createElement("button");
        deleteBtn.className = "delete-btn";
        deleteBtn.type = "button";
        deleteBtn.innerHTML = "Delete";

        const timesDiv = document.createElement("div");
        timesDiv.className = "times-div";
        timesDiv.appendChild(divToAddForStartTime);
        timesDiv.appendChild(divToAdd);
        timesDiv.appendChild(deleteBtn);

        e.currentTarget.parentNode.insertBefore(timesDiv,addAnotherBtn);
    })

    document.querySelector(".deviceForm").addEventListener("click", (e) => {
        if (e.target.className === "delete-btn") {
            console.log(e.target.parentNode.parentNode.parentNode)
            e.target.parentNode.parentNode.removeChild(e.target.parentNode);
        }
    })

</script>